require('dotenv').config();
const { Client, LocalAuth } = require('whatsapp-web.js');

const client = new Client({
    authStrategy: new LocalAuth()
});

let botEnabled = true; // –§–ª–∞–≥ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –±–æ—Ç–∞

client.on('qr', qr => {
    console.log('QR-–∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', qr);
});

client.on('ready', () => {
    console.log('‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω!');
});

client.on('message', async msg => {
    const chatId = msg.from;
    const text = msg.body.trim();

    // ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    if (msg.fromMe) {
        // –ï—Å–ª–∏ –∞–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–º–∞–Ω–¥—É –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –±–æ—Ç–∞
        if (text.toLowerCase() === "!–±–æ—Ç –≤—ã–∫–ª") {
            botEnabled = false;
            client.sendMessage(chatId, "üö´ –ë–æ—Ç –æ—Ç–∫–ª—é—á—ë–Ω. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `!–±–æ—Ç –≤–∫–ª`.");
            console.log("–ë–æ—Ç –æ—Ç–∫–ª—é—á—ë–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.");
        } 
        // –ï—Å–ª–∏ –∞–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–º–∞–Ω–¥—É –≤–∫–ª—é—á–µ–Ω–∏—è –±–æ—Ç–∞
        else if (text.toLowerCase() === "!–±–æ—Ç –≤–∫–ª") {
            botEnabled = true;
            client.sendMessage(chatId, "‚úÖ –ë–æ—Ç —Å–Ω–æ–≤–∞ –≤–∫–ª—é—á—ë–Ω.");
            console.log("–ë–æ—Ç –≤–∫–ª—é—á—ë–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.");
        }
        return;
    }

    // ‚úÖ –ï—Å–ª–∏ –±–æ—Ç –æ—Ç–∫–ª—é—á–µ–Ω, –Ω–µ –æ—Ç–≤–µ—á–∞–µ–º –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    if (!botEnabled) {
        console.log("–ë–æ—Ç –æ—Ç–∫–ª—é—á—ë–Ω, —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ.");
        return;
    }

    // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç –ª–∏—Ü–∞ –∫–ª–∏–Ω–∏–∫–∏
    if (text.toLowerCase() === "–ø—Ä–∏–≤–µ—Ç" || text.toLowerCase() === "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ") {
        client.sendMessage(chatId, 
            "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í—ã –æ–±—Ä–∞—Ç–∏–ª–∏—Å—å –≤ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –∫–ª–∏–Ω–∏–∫—É. –ß–µ–º –º–æ–∂–µ–º –ø–æ–º–æ—á—å?\n" +
            "1Ô∏è‚É£ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏—ë–º\n" +
            "2Ô∏è‚É£ –£–∑–Ω–∞—Ç—å —Ü–µ–Ω—ã\n" +
            "3Ô∏è‚É£ –ê–¥—Ä–µ—Å –∫–ª–∏–Ω–∏–∫–∏\n" +
            "4Ô∏è‚É£ –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–Ω–∏–∫–∏"
        );
        return;
    }

    // –û—Ç–≤–µ—Ç—ã –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
    if (text === "1") {
        client.sendMessage(chatId, "–ú—ã –∑–∞–ø–∏—Å–∞–ª–∏ –≤–∞—Å –Ω–∞ –ø—Ä–∏—ë–º. –£—Ç–æ—á–Ω–∏—Ç–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è.");
    } else if (text === "2") {
        client.sendMessage(chatId, "–¶–µ–Ω—ã –Ω–∞ —É—Å–ª—É–≥–∏:\n- –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è: 1000‚ÇΩ\n- –ü–ª–æ–º–±–∏—Ä–æ–≤–∞–Ω–∏–µ: 3000‚ÇΩ\n- –£–¥–∞–ª–µ–Ω–∏–µ –∑—É–±–∞: 5000‚ÇΩ.");
    } else if (text === "3") {
        client.sendMessage(chatId, "–ê–¥—Ä–µ—Å –∫–ª–∏–Ω–∏–∫–∏: –≥. –¢–µ—Å—Ç–æ–≤—ã–π, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, 10.");
    } else if (text === "4") {
        client.sendMessage(chatId, "–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏: +7 999 123-45-67.");
    } else {
        client.sendMessage(chatId,
            "–ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª–∏ –≤–∞—à –∑–∞–ø—Ä–æ—Å. –£—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç:\n" +
            "1Ô∏è‚É£ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏—ë–º\n" +
            "2Ô∏è‚É£ –£–∑–Ω–∞—Ç—å —Ü–µ–Ω—ã\n" +
            "3Ô∏è‚É£ –ê–¥—Ä–µ—Å –∫–ª–∏–Ω–∏–∫–∏\n" +
            "4Ô∏è‚É£ –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–Ω–∏–∫–∏"
        );
    }
});

client.initialize();
